#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include "DHT.h"
#define SCREEN_WIDTH 128 
#define SCREEN_HEIGHT 64 
#define OLED_RESET     -1 
#define SCREEN_ADDRESS 0x3C 
#define NUMFLAKES     10 
#define LOGO_HEIGHT   16
#define LOGO_WIDTH    16



static const unsigned char PROGMEM image_tree_bits[] = {0x0e,0x54,0x37,0x58,0x7a,0x10,0x10,0x3c};

static const unsigned char PROGMEM image_weather_humidity_bits[] = {0x00,0x00,0x04,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x0e,0x00,0x00,0x00,0x1e,0x00,0x00,0x00,0x1f,0x00,0x00,0x00,0x3f,0x80,0x00,0x00,0x3f,0x80,0x00,0x00,0x7e,0xc0,0x00,0x00,0x7f,0x40,0x00,0x00,0xff,0x60,0x00,0x00,0xff,0xe0,0x00,0x00,0x7f,0xc0,0x00,0x00,0x7f,0xc0,0x00,0x00,0x3f,0x80,0x00,0x00,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00};

static const unsigned char PROGMEM image_weather_sun_bits[] = {0x01,0x00,0x21,0x08,0x10,0x10,0x03,0x80,0x8c,0x62,0x48,0x24,0x10,0x10,0x10,0x10,0x10,0x10,0x48,0x24,0x8c,0x62,0x03,0x80,0x10,0x10,0x21,0x08,0x01,0x00,0x00,0x00};

static const unsigned char PROGMEM image_weather_temperature_bits[] = {0x1c,0x00,0x22,0x02,0x2b,0x05,0x2a,0x02,0x2b,0x38,0x2a,0x60,0x2b,0x40,0x2a,0x40,0x2a,0x60,0x49,0x38,0x9c,0x80,0xae,0x80,0xbe,0x80,0x9c,0x80,0x41,0x00,0x3e,0x00};

static const unsigned char PROGMEM image_weather_wind_bits[] = {0x00,0x00,0x00,0x00,0x00,0x30,0x03,0x88,0x04,0x44,0x04,0x44,0x00,0x44,0x00,0x88,0xff,0x32,0x00,0x00,0xad,0x82,0x00,0x60,0x00,0x10,0x00,0x10,0x01,0x20,0x00,0xc0};


Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

DHT dht(2,DHT11);
float temp;
float humidity;

void setup() {
  dht.begin();
  Serial.begin(9600);
  display.begin(SSD1306_SWITCHCAPVCC, SCREEN_ADDRESS);
}

  void loop() {
  temp=dht.readTemperature();
  humidity=dht.readHumidity();
  // Layer 1
  display.clearDisplay();
  display.setTextColor(1);
  display.setTextWrap(false);
  display.setCursor(20, 0);
  display.print("weather station");

  // tree
  display.drawBitmap(7, 0, image_tree_bits, 8, 8, 1);

  // Layer 3
  display.setCursor(28, 18);
  display.print("sunny");

  // weather_sun
  display.drawBitmap(9, 14, image_weather_sun_bits, 15, 16, 1);

  // Layer 5
  display.setCursor(31, 44);
  display.print(temp);
  Serial.print(" C ");
  // weather_temperature
  display.drawBitmap(9, 39, image_weather_temperature_bits, 16, 16, 1);

  // Layer 7
  display.setCursor(91, 19);
  display.print("windy");

  // weather_wind
  display.drawBitmap(70, 15, image_weather_wind_bits, 15, 16, 1);

  // Layer 9
  display.setCursor(95, 45);
  display.print(humidity);
  Serial.println(" %");

  // weather_humidity
  display.drawBitmap(56, 38, image_weather_humidity_bits, 27, 25, 1);

  // Layer 11
  display.drawLine(0, 0, 0, 0, 1);

  // Layer 12
  display.drawLine(0, 0, 0, 0, 1);

  // Layer 13
  display.drawLine(0, 0, 0, 0, 1);

  // Layer 14
  display.drawLine(2, 11, 128, 11, 1);

  display.display();
    
}
